{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export const SalesContext=/*#__PURE__*/createContext();export const SalesProvider=_ref=>{let{children}=_ref;const[sales,setSales]=useState([]);const[formData,setFormData]=useState({itemName:'',price:'',date:'',paymentMode:'cash',category:'',editing:false,id:null});const[todayTotals,setTodayTotals]=useState({cash:0,card:0});useEffect(()=>{fetchSales();fetchTodayTotals();},[]);const fetchSales=async()=>{try{const response=await axios.get('http://localhost:8080/sales');setSales(response.data);}catch(error){console.error('Failed to fetch sales',error);}};const addOrUpdateSale=async()=>{const submissionData={...formData,price:parseFloat(formData.price)||0};const method=formData.editing?'put':'post';const url=formData.editing?\"http://localhost:8080/sales/\".concat(formData.id):'http://localhost:8080/sales';try{await axios[method](url,submissionData);await fetchSales();await fetchTodayTotals();setFormData({itemName:'',price:'',date:'',paymentMode:'cash',category:'',editing:false,id:null});}catch(error){console.error('Failed to add/update sale',error);}};const deleteSale=async id=>{try{await axios.delete(\"http://localhost:8080/sales/\".concat(id));await fetchSales();await fetchTodayTotals();}catch(error){console.error('Failed to delete sale',error);}};const startEdit=sale=>{setFormData({...sale,editing:true});};const fetchTodayTotals=async()=>{try{const response=await axios.get('http://localhost:8080/today-sales');setTodayTotals(response.data);}catch(error){console.error('Failed to fetch today\\'s totals',error);}};return/*#__PURE__*/_jsx(SalesContext.Provider,{value:{sales,formData,setFormData,addOrUpdateSale,deleteSale,startEdit,// Include startEdit here\ntodayTotals},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","SalesContext","SalesProvider","_ref","children","sales","setSales","formData","setFormData","itemName","price","date","paymentMode","category","editing","id","todayTotals","setTodayTotals","cash","card","fetchSales","fetchTodayTotals","response","get","data","error","console","addOrUpdateSale","submissionData","parseFloat","method","url","concat","deleteSale","delete","startEdit","sale","Provider","value"],"sources":["C:/Users/twins/Desktop/spl_project/Sales Tracker/Sales Tracker/sales-tracker/src/SalesContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const SalesContext = createContext();\n\nexport const SalesProvider = ({ children }) => {\n    const [sales, setSales] = useState([]);\n    const [formData, setFormData] = useState({\n        itemName: '',\n        price: '',\n        date: '',\n        paymentMode: 'cash',\n        category: '',\n        editing: false,\n        id: null\n    });\n    const [todayTotals, setTodayTotals] = useState({ cash: 0, card: 0 });\n\n    useEffect(() => {\n        fetchSales();\n        fetchTodayTotals();\n    }, []);\n\n    const fetchSales = async () => {\n        try {\n            const response = await axios.get('http://localhost:8080/sales');\n            setSales(response.data);\n        } catch (error) {\n            console.error('Failed to fetch sales', error);\n        }\n    };\n\n    const addOrUpdateSale = async () => {\n        const submissionData = {\n            ...formData,\n            price: parseFloat(formData.price) || 0\n        };\n        const method = formData.editing ? 'put' : 'post';\n        const url = formData.editing ? `http://localhost:8080/sales/${formData.id}` : 'http://localhost:8080/sales';\n        try {\n            await axios[method](url, submissionData);\n            await fetchSales();\n            await fetchTodayTotals();\n            setFormData({\n                itemName: '',\n                price: '',\n                date: '',\n                paymentMode: 'cash',\n                category: '',\n                editing: false,\n                id: null\n            });\n        } catch (error) {\n            console.error('Failed to add/update sale', error);\n        }\n    };\n\n    const deleteSale = async (id) => {\n        try {\n            await axios.delete(`http://localhost:8080/sales/${id}`);\n            await fetchSales();\n            await fetchTodayTotals();\n        } catch (error) {\n            console.error('Failed to delete sale', error);\n        }\n    };\n\n    const startEdit = (sale) => {\n        setFormData({\n            ...sale,\n            editing: true\n        });\n    };\n\n    const fetchTodayTotals = async () => {\n        try {\n            const response = await axios.get('http://localhost:8080/today-sales');\n            setTodayTotals(response.data);\n        } catch (error) {\n            console.error('Failed to fetch today\\'s totals', error);\n        }\n    };\n\n    return (\n        <SalesContext.Provider value={{\n            sales, \n            formData, \n            setFormData, \n            addOrUpdateSale, \n            deleteSale, \n            startEdit, // Include startEdit here\n            todayTotals\n        }}>\n            {children}\n        </SalesContext.Provider>\n    );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}