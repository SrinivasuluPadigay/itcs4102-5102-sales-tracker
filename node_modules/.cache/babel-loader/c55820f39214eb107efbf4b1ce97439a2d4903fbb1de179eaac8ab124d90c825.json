{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export const SalesContext=/*#__PURE__*/createContext();export const SalesProvider=_ref=>{let{children}=_ref;const[sales,setSales]=useState([]);const[formData,setFormData]=useState({itemName:'',price:'',date:'',paymentMode:'cash',category:'',editing:false,id:null});useEffect(()=>{fetchSales();},[]);const fetchSales=async()=>{try{const response=await axios.get('http://localhost:8080/sales');setSales(response.data);}catch(error){console.error('Failed to fetch sales',error);}};const addOrUpdateSale=async()=>{const submissionData={...formData,price:parseFloat(formData.price)||0// Ensure price is a float\n};const method=formData.editing?'put':'post';const url=formData.editing?\"http://localhost:8080/sales/\".concat(formData.id):'http://localhost:8080/sales';try{const response=await axios[method](url,submissionData);fetchSales();setFormData({itemName:'',price:'',date:'',paymentMode:'cash',editing:false,id:null});}catch(error){console.error('Failed to add/update sale',error);}};const startEdit=sale=>{setFormData({...sale,editing:true});};const deleteSale=async id=>{try{await axios.delete(\"http://localhost:8080/sales/\".concat(id));fetchSales();}catch(error){console.error('Failed to delete sale',error);}};return/*#__PURE__*/_jsx(SalesContext.Provider,{value:{sales,formData,setFormData,addOrUpdateSale,startEdit,deleteSale},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","SalesContext","SalesProvider","_ref","children","sales","setSales","formData","setFormData","itemName","price","date","paymentMode","category","editing","id","fetchSales","response","get","data","error","console","addOrUpdateSale","submissionData","parseFloat","method","url","concat","startEdit","sale","deleteSale","delete","Provider","value"],"sources":["C:/Users/twins/Desktop/spl_project/Sales Tracker/Sales Tracker/sales-tracker/src/SalesContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const SalesContext = createContext();\n\nexport const SalesProvider = ({ children }) => {\n    const [sales, setSales] = useState([]);\n    const [formData, setFormData] = useState({\n        itemName: '',\n        price: '',\n        date: '',\n        paymentMode: 'cash',\n        category: '',\n        editing: false,\n        id: null\n    });\n\n    useEffect(() => {\n        fetchSales();\n    }, []);\n\n\n\n    const fetchSales = async () => {\n        try {\n            const response = await axios.get('http://localhost:8080/sales');\n            setSales(response.data);\n        } catch (error) {\n            console.error('Failed to fetch sales', error);\n        }\n    };\n\n    const addOrUpdateSale = async () => {\n        const submissionData = {\n        ...formData,\n        price: parseFloat(formData.price) || 0  // Ensure price is a float\n    };\n        const method = formData.editing ? 'put' : 'post';\n        const url = formData.editing ? `http://localhost:8080/sales/${formData.id}` : 'http://localhost:8080/sales';\n        try {\n            const response = await axios[method](url, submissionData);\n            fetchSales();\n            setFormData({\n                itemName: '',\n                price: '',\n                date: '',\n                paymentMode: 'cash',\n                editing: false,\n                id: null\n            });\n        } catch (error) {\n            console.error('Failed to add/update sale', error);\n        }\n    };\n\n    const startEdit = (sale) => {\n        setFormData({\n            ...sale,\n            editing: true\n        });\n    };\n\n    const deleteSale = async (id) => {\n        try {\n            await axios.delete(`http://localhost:8080/sales/${id}`);\n            fetchSales();\n        } catch (error) {\n            console.error('Failed to delete sale', error);\n        }\n    };\n\n    return (\n        <SalesContext.Provider value={{ sales, formData, setFormData, addOrUpdateSale, startEdit, deleteSale }}>\n            {children}\n        </SalesContext.Provider>\n    );\n};\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}